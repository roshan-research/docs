
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the باز API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #303030;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sa {
  color: #aa759f;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-0ebbd6be.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-9801298e.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b49a9d77.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;plaintext&quot;,&quot;python&quot;]">
  <div style="position:fixed;z-index:50;height:4px;width:100%;background-color:#FF6200;">
  </div>
    <div class="toc-wrapper">
      <div>
        <a href="#" id="nav-button">
          <span>
            <img src="images/navbar-cad8cdcb.png" alt="" />
            <span>منو</span> 
          </span>
        </a>
        <div>
          <img src="images/logo-b4f53680.svg" class="logo" alt="" />
            <div class="search">
              <input type="text" class="search" id="input-search" placeholder="جست و جو">
            </div>
            <ul class="search-results"></ul>
          <ul id="toc" class="toc-list-h1">
              <li>
                <a href="#fc30c6605b" class="toc-h1 toc-link" data-title="باز">باز</a>
              </li>
              <li>
                <a href="#8f2d3c81ae" class="toc-h1 toc-link" data-title="ایندکس">ایندکس</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#5499c86d17" class="toc-h2 toc-link" data-title="ایندکس‌کردن محتوا">ایندکس‌کردن محتوا</a>
                      </li>
                      <li>
                        <a href="#0c032d100f" class="toc-h2 toc-link" data-title="ویرایش محتوای ایندکس">ویرایش محتوای ایندکس</a>
                      </li>
                      <li>
                        <a href="#d6813cc994" class="toc-h2 toc-link" data-title="حذف محتوای ایندکس">حذف محتوای ایندکس</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#5a91792863" class="toc-h1 toc-link" data-title="جستجوی معمولی">جستجوی معمولی</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#b40d4b44b2" class="toc-h2 toc-link" data-title="مثال">مثال</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#175d0d146c" class="toc-h1 toc-link" data-title="جستجوی درلحظه‌">جستجوی درلحظه‌</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#b40d4b44b2-2" class="toc-h2 toc-link" data-title="مثال">مثال</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#1343ad4c0b" class="toc-h1 toc-link" data-title="‌پیشنهاد جستجو">‌پیشنهاد جستجو</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#b40d4b44b2-3" class="toc-h2 toc-link" data-title="مثال">مثال</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#2a07a58f62" class="toc-h1 toc-link" data-title="محتواهای مشابه">محتواهای مشابه</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#b40d4b44b2-4" class="toc-h2 toc-link" data-title="مثال">مثال</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#ee384ab3c4" class="toc-h1 toc-link" data-title="محتواهای منبع">محتواهای منبع</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#b40d4b44b2-5" class="toc-h2 toc-link" data-title="مثال">مثال</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#ba7b994b13" class="toc-h1 toc-link" data-title="‌عبارات کلیدی">‌عبارات کلیدی</a>
                  <ul class="toc-list-h2">
                      <li>
                        <a href="#c68bacf341" class="toc-h2 toc-link" data-title="مثال: درخواست با متنِ محتوا">مثال: درخواست با متنِ محتوا</a>
                      </li>
                      <li>
                        <a href="#2e84bfc77d" class="toc-h2 toc-link" data-title="مثال: درخواست با شناسهٔ محتوا">مثال: درخواست با شناسهٔ محتوا</a>
                      </li>
                  </ul>
              </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='fc30c6605b'>باز</h1>
<p>باز یک ای‌پی‌آی بومی برای جستجو در محتوای فارسی است. برای دسترسی به این ای‌پی‌آی به یک <code>TOKEN_KEY</code> نیاز دارید که می‌توانید از طریق ایمیلِ <a href="mailto:baaz@roshan-ai.ir">baaz@roshan-ai.ir</a> درخواست دهید.</p>
<h1 id='8f2d3c81ae'>ایندکس</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکس.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr></table>

<p>قبل از اینکه بتوانید جستجو کنید ابتدا باید داده‌ها را ایندکس کنید. این تابع با دریافت یک شناسه، محتوای شما را تحت این شناسه ایندکس می‌کند.</p>
<h2 id='5499c86d17'>ایندکس‌کردن محتوا</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>{
    "items": [
        {
            "type": "movie",
            "id": 1,
            "title": "ماجرای نیمروز",
            "director": "محمدحسین مهدویان",
            "actors": [
                "جواد عزتی",
                "هادی حجازی‌فر"
            ],
            "labels": [
                "هیجانی",
                "ماجراجویی"
            ],
            "importance": 100,
            "data": {
                "url": "https://www.filimo.com/m/czWum"
            }
        },
        {
            "type": "movie",
            "id": 2,
            "title": "ایستاده در غبار",
            "director": "محمدحسین مهدویان",
            "labels": [
                "هیجانی",
                "جنگی"
            ],
            "importance": 50,
            "data": {
                "url": "https://www.filimo.com/m/fsa4n"
            }
        },
        {
            "type": "person",
            "id": 1,
            "title": "ابراهیم حاتمی‌کیا",
            "data": {
                "url": "https://www.filimo.com/crew/ابراهیم_حاتمی_کیا"
            }
        }
    ]
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> POST <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="o">{</span>
    <span class="s2">"items"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="s2">"movie"</span>,
            <span class="s2">"id"</span>: 1,
            <span class="s2">"title"</span>: <span class="s2">"ماجرای نیمروز"</span>,
            <span class="s2">"director"</span>: <span class="s2">"محمدحسین مهدویان"</span>,
            <span class="s2">"actors"</span>: <span class="o">[</span>
                <span class="s2">"جواد عزتی"</span>,
                <span class="s2">"هادی حجازی‌فر"</span>
            <span class="o">]</span>,
            <span class="s2">"labels"</span>: <span class="o">[</span>
                <span class="s2">"هیجانی"</span>,
                <span class="s2">"ماجراجویی"</span>
            <span class="o">]</span>,
            <span class="s2">"importance"</span>: 100,
            <span class="s2">"data"</span>: <span class="o">{</span>
                <span class="s2">"url"</span>: <span class="s2">"https://www.filimo.com/m/czWum"</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="s2">"movie"</span>,
            <span class="s2">"id"</span>: 2,
            <span class="s2">"title"</span>: <span class="s2">"ایستاده در غبار"</span>,
            <span class="s2">"director"</span>: <span class="s2">"محمدحسین مهدویان"</span>,
            <span class="s2">"labels"</span>: <span class="o">[</span>
                <span class="s2">"هیجانی"</span>,
                <span class="s2">"جنگی"</span>
            <span class="o">]</span>,
            <span class="s2">"importance"</span>: 50,
            <span class="s2">"data"</span>: <span class="o">{</span>
                <span class="s2">"url"</span>: <span class="s2">"https://www.filimo.com/m/fsa4n"</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="s2">"person"</span>,
            <span class="s2">"id"</span>: 1,
            <span class="s2">"title"</span>: <span class="s2">"ابراهیم حاتمی‌کیا"</span>,
            <span class="s2">"data"</span>: <span class="o">{</span>
                <span class="s2">"url"</span>: <span class="s2">"https://www.filimo.com/crew/ابراهیم_حاتمی_کیا"</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/index
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
{
    "items": [
        {
            "type": "movie",
            "id": 1,
            "title": "ماجرای نیمروز",
            "director": "محمدحسین مهدویان",
            "actors": [
                "جواد عزتی",
                "هادی حجازی‌فر"
            ],
            "labels": [
                "هیجانی",
                "ماجراجویی"
            ],
            "importance": 100,
            "data": {
                "url": "https://www.filimo.com/m/czWum"
            }
        },
        {
            "type": "movie",
            "id": 2,
            "title": "ایستاده در غبار",
            "director": "محمدحسین مهدویان",
            "labels": [
                "هیجانی",
                "جنگی"
            ],
            "importance": 50,
            "data": {
                "url": "https://www.filimo.com/m/fsa4n"
            }
        },
        {
            "type": "person",
            "id": 1,
            "title": "ابراهیم حاتمی‌کیا",
            "data": {
                "url": "https://www.filimo.com/crew/ابراهیم_حاتمی_کیا"
            }
        }
    ]
}
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/index'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">       </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w">
       </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای ایندکس‌کردن محتوا درخواست خود را با متد <code>POST</code> به‌همراه پارامتر <code>items</code> ارسال کنید. هر یک از عناصر آرایهٔ <code>items</code> بیانگر یک محتواست. هر محتوا دارای یک‌سری فیلدهای اجباری و یک‌سری فیلدهای اختیاری است. جدایی از این فیلدها می‌توانید فیلدهای خودتان را هم اضافه کنید. اگر محتوایی با <code>type</code> و <code>id</code> یکسان قبلاً ایندکس شده باشد جایگزین آن می‌شود.</p>

<dl style="background-color:transparent;"><code>POST /{index_name}/index</code></dl>

<dl>
<strong>type(required)</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    movie
                    </span>
</dl>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  نوع محتوا را مشخص می‌کند. درواقع هر `type` نمایندهٔ یک دسته از محتواست. مثلاً در نمونهٔ مقابل، مشخصات فیلم‌ها با تایپ movie و مشخصات افراد با تایپ `person` ارسال شده است. این فیلد قابل جستجو نیست.</p>

<p><br><br>
<dl>
<strong>id(required)</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    1
                    </span>
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  شناسهٔ محتواست که باید در سطح هر `type` منحصربه‌فرد باشد. اگر محتوایی با `type` و `id` یکسان ارسال شود خطایی صادر نمی‌شود بلکه محتوای جدید جایگزین قبلی می‌شود.</p>

<p><br><br>
<dl>
<strong>title(required)</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    ماجرای نیمروز
                    </span>
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  عنوان محتواست که مهم‌ترین عامل در رتبه‌بندی نتایج جستجو است. در هنگام جستجو اگر هیچ فیلدی برای جستجو انتخاب نشود جستجو به صورت پیش‌فرض روی این فیلد صورت می‌گیرد.</p>

<p><br><br>
<dl>
<strong>importance</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    100
                    </span>
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  میزان اهمیت محتواست. هرچه این عدد بیشتر باشد جایگاه محتوا در نتایج جستجو بالاتر است. این فیلد قابل جستجو نیست و فقط روی ترتیب نتایج جستجو اثر می‌گذارد.</p>

<p><br><br>
<dl>
<strong>time</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    2017
                    </span>
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  07-08 10:30:00 (string) - تاریخ محتواست. هرچه این تاریخ جدیدتر باشد جایگاه محتوا در نتایج جستجو بالاتر است. این فیلد قابل جستجو نیست و فقط روی ترتیب نتایج جستجو اثر می‌گذارد.</p>

<p><br><br>
<dl>
<strong>labels</strong>
<br>
<br>
Value: [هیجانی, ماجراجویی, ]
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  برای هر محتوایی می‌توانید برچسب‌هایی تعریف کنید. این فیلد قابل جستجو نیست و صرفاً برای محدودکردن نتایج کاربرد دارد.</p>

<p><br><br>
<dl>
<strong>...</strong>
<br>
<br>
Value: <span style="background-color: #00A693;
                    border-color: #00A693;
                    border-width: 3px;
                    border-radius: 2px">
                    ...
                    </span>
</dl></p>

<p style="direction:rtl;font-weight:300;">
<img src="images/vector-c3fae21d.svg" alt="vector">  به جز فیلدهای بالا هر فیلد دیگری می‌توانید تعریف کنید. این فیلدها قابل جستجو هستند و بعداً می‌توانید نتایج جستجو را بر اساس آن محدود کنید. فیلدهایی که اضافه می‌کنید فقط باید حاوی متن باشند. این فیلد می‌تواند یک **فیلد ساده حاوی متن** باشد مثل `director` در مثال مقابل یا یک **آرایهٔ حاوی مقادیر متنی** مثل `actors` یا یک **کلاس حاوی مقادیر متنی** مثل `data`.</p>

<p><br><br></p>
<h2 id='0c032d100f'>ویرایش محتوای ایندکس</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>{
    "items": [
        {
            "type": "movie",
            "id": 1,
            "importance": 200
        }
    ]
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> PUT <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="o">{</span>
    <span class="s2">"items"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="s2">"movie"</span>,
            <span class="s2">"id"</span>: 1,
            <span class="s2">"importance"</span>: 200
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/index
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
{
    "items": [
        {
            "type": "movie",
            "id": 1,
            "importance": 200
        }
    ]
}
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/index'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">       </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
       </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای ویرایش محتوای یک ایندکس درخواست خود را با متد <code>PUT</code> ارسال کنید و در بدنهٔ درخواست، آرایهٔ <code>items</code> را به‌همراه فیلدهایی که می‌خواهید مقدارشان تغییر کند ضمیمه کنید. در هر محتوا واردکردن دو فیلد <code>type</code> و <code>id</code> برای یافتن محتوا ضروری است. به‌جز این‌ها هر فیلد دیگری وارد کنید مقدار آن‌ها ویرایش می‌شود. بقیهٔ فیلدهایی که وارد نکرده‌اید دست‌نخورده باقی می‌مانند. مثلاً در نمونهٔ مقابل، محتوایی با تایپ movie و شناسهٔ ۱ در ایندکس جستجو می‌شود و مقدار فیلد importance آن به ۲۰۰ تغییر می‌کند.</p>

<dl style="background-color:transparent;"><code>PUT /{index_name}/index</code></dl>
<h2 id='d6813cc994'>حذف محتوای ایندکس</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>{
    "type": "movie",
    "ids": [
        2
    ]
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> DELETE <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="o">{</span>
    <span class="s2">"type"</span>: <span class="s2">"movie"</span>,
    <span class="s2">"ids"</span>: <span class="o">[</span>
        2
    <span class="o">]</span>
<span class="o">}</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/index
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
{
    "type": "movie",
    "ids": [
        2
    ]
}
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/index'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">       </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w">
       </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای حذف یک یا چند محتوا درخواست خود را با متد <code>DELETE</code> ارسال کنید و در بدنهٔ درخواست دو پارامتر <code>type</code> و <code>ids</code> را مقداردهی کنید. با ارسال این درخواست آن دسته از محتواهایی که نوعشان برابر <code>type</code> است و شناسه‌شان در آرایهٔ <code>ids</code> وجود دارد از ایندکس حذف می‌شوند. <mark>اگر هیچ پارامتری وارد نکنید کل ایندکس حذف می‌شود.</mark> </p>

<dl style="background-color:transparent;"><code>DELETE /{index_name}/index</code></dl>
<h1 id='5a91792863'>جستجوی معمولی</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکسی که می‌خواهید در آن جستجو شود.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
انواعی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک نوع را با کاراکتر خط عمودی `|` از هم جدا کنید.
</td>
<td style="font-weight: bold">
types
</td>
</tr>
<tr>
<td>
عبارت جستجو
</td>
<td style="font-weight: bold">
text
</td>
</tr>
<tr>
<td>
فیلد یا فیلدهایی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک فیلد را با کاراکتر خط عمودی `|` از هم جدا کنید. اگر هیچ فیلدی وارد نکنید جستجو به‌طور‌ پیش‌فرض در فیلد `Title` صورت می‌گیرد.
</td>
<td style="font-weight: normal">
fields
</td>
</tr>
<tr>
<td>
تعداد نتایج جستجو را مشخص می‌کند. این پارامتر اختیاری است و اگر ارسال نکنید کل نتایج جستجو نمایش داده می‌شود.
</td>
<td style="font-weight: normal">
size
</td>
</tr>
<tr>
<td>
بعد از ارسال درخواستِ جستجو، آرایه‌ای از نتایج بازگردانده می‌شود. با تنظیم پارمتر `from` بیان می‌کنید که نتایج از کدام شماره بازگردد؛ مثلاً ۰ یعنی از ابتدا همه را نشان بده. ۲ یعنی از سومین عنصر به بعد نشان بده. این پارامتر نیز همانند `size` اختیاری است و مقدار پیش‌فرض آن ۰ است یعنی همهٔ نتایج نشان داده می‌شود.
</td>
<td style="font-weight: normal">
from
</td>
</tr></table>

<p>عبارتی را در یک ایندکس جستجو می‌کند. این تابع در صورت وجود اشتباه در عبارت جستجو منظور کاربر را حدس می‌زند و در پارامتر <code>didYouMean</code> حدس خود را برمی‌گرداند و برمبنای همین حدس، نتایج جستجو را باز می‌گرداند.</p>
<h2 id='b40d4b44b2'>مثال</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>""
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> GET <span class="se">\ </span>
      <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">""</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/query<span class="o">{</span>?fields,text,size,from<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
""
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>

<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/query{?fields,text,size,from}'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.680344</span><span class="p">,</span><span class="w">
            </span><span class="nl">"highlight"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"ماجرای &lt;em&gt;نیمروز&lt;/em&gt;"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ماجرای نیمروز"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"هیجانی"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"ماجراجویی"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"importance"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"movie"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"didYouMean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;em&gt;نیمروز&lt;/em&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>خروجی مقابل در پاسخ به این درخواست است:</p>

<p><code>http://api.sobhe.ir:7000/index1/movie/query?text=نیم‌روز&amp;fields=title&amp;size=2&amp;from=0</code></p>

<p>عبارت <code>نیم‌روز</code> در فیلد <code>title</code> تمام آیتم‌های موجود در <code>index1</code> که تایپ آن <code>movie</code> است جستجو می‌شود و نتایج از آیتم شمارهٔ <code>۰</code> به‌بعد و به تعداد <code>۲</code> عدد بازمی‌گردد. در مثال مقابل چون فقط یک نتیجه وجود داشته همان یک نتیجه بازگردانده شده است.</p>

<dl style="background-color:transparent;"><code>GET /{index_name}/{types}/query{?fields,text,size,from}</code></dl>
<h1 id='175d0d146c'>جستجوی درلحظه‌</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکسی که می‌خواهید در آن جستجو شود.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
انواعی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک نوع را با کاراکتر خط عمودی `|` از هم جدا کنید.
</td>
<td style="font-weight: bold">
types
</td>
</tr>
<tr>
<td>
عبارت جستجو
</td>
<td style="font-weight: bold">
text
</td>
</tr>
<tr>
<td>
تعداد نتایج جستجو را مشخص می‌کند. این پارامتر اختیاری است و اگر ارسال نکنید کل نتایج جستجو نمایش داده می‌شود.
</td>
<td style="font-weight: normal">
size
</td>
</tr>
<tr>
<td>
بعد از ارسال درخواستِ جستجو، آرایه‌ای از نتایج بازگردانده می‌شود. با تنظیم پارمتر `from` بیان می‌کنید که نتایج از کدام شماره بازگردد؛ مثلاً ۰ یعنی از ابتدا همه را نشان بده. ۲ یعنی از سومین عنصر به بعد نشان بده. این پارامتر نیز همانند `size` اختیاری است و مقدار پیش‌فرض آن ۰ است یعنی همهٔ نتایج نشان داده می‌شود.
</td>
<td style="font-weight: normal">
from
</td>
</tr></table>

<p>این تابع همزمان با تایپ کاربر جستجو می‌کند و دو تفاوت مهم با <a href="#5a91792863">جستجوی معمولی</a> دارد. اولاً فقط در فیلد title جستجو می‌کند و دوماً اگر بخشی از کلمه نیز در فیلد title وجود داشته باشد به عنوان نتیجه بازمی‌گرداند. به‌عنوان مثال در نمونه‌درخواست مقابل با جستجوی «ماجر»، فیلم «ماجرای نیمروز» جزو یکی از نتایج است. دقت کنید این تابع جستجو را فقط از ابتدای کلمه انجام می‌دهد. یعنی مثلاً‌ در نمونهٔ مقابل با جستجوی «ماجر»، «نیم» و «ماجرای نیمر» به نتایج مشابهی می‌رسید ولی جستجوی «جرای»، «روز» نتایجی در پی نخواهد داشت چون این‌ها بخشی از ابتدای کلمات نیست.</p>
<h2 id='b40d4b44b2-2'>مثال</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>""
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> GET <span class="se">\ </span>
      <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">""</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/complete<span class="o">{</span>?text,size,from<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
""
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>

<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/complete{?text,size,from}'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.3929849</span><span class="p">,</span><span class="w">
            </span><span class="nl">"highlight"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"&lt;em&gt;ماجرای&lt;/em&gt; نیمروز"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"movie"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ماجرای نیمروز"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"هیجانی"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"ماجراجویی"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"importance"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>GET /{index_name}/{types}/complete{?text,size,from}</code></dl>
<h1 id='1343ad4c0b'>‌پیشنهاد جستجو</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکسی که می‌خواهید در آن جستجو شود.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
انواعی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک نوع را با کاراکتر خط عمودی `|` از هم جدا کنید.
</td>
<td style="font-weight: bold">
types
</td>
</tr>
<tr>
<td>
عبارت جستجو
</td>
<td style="font-weight: bold">
text
</td>
</tr></table>

<p>این تابع همزمان با جستجوی کاربر، با بررسی تاریخچهٔ جستجوهای قبلی، عبارات مناسبی برای جستجو پیشنهاد می‌دهد.</p>
<h2 id='b40d4b44b2-3'>مثال</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>""
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> GET <span class="se">\ </span>
      <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">""</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/suggest<span class="o">{</span>?text<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
""
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>

<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/suggest{?text}'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"نیم‌روز"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>GET /{index_name}/{types}/suggest{?text}</code></dl>
<h1 id='2a07a58f62'>محتواهای مشابه</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکسی که می‌خواهید در آن جستجو شود.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
انواعی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک نوع را با کاراکتر خط عمودی `|` از هم جدا کنید.
</td>
<td style="font-weight: bold">
types
</td>
</tr></table>

<p>با دریافت اطلاعات مربوط به یک محتوا، شبیه‌ترین محتواها را به‌همراه میزان مشابهت هر یک از آن‌ها برمی‌گرداند. تنها وارد کردن فیلد <code>Title‌</code> در بدنهٔ این درخواست اجباری است. بقیهٔ فیلدها اختیاری است. هرچه فیلدهای بیشتری وارد کنید نتایج جستجو دقیق‌تر می‌شود. همچنین شما فقط می‌توانید فیلدهای دارای مقادیر متنی را وارد کنید.</p>
<h2 id='b40d4b44b2-4'>مثال</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>{
    "title": "پرویز"
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> POST <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="o">{</span>
    <span class="s2">"title"</span>: <span class="s2">"پرویز"</span>
<span class="o">}</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/similars
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
{
    "title": "پرویز"
}
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/similars'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"پرویز"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>POST /{index_name}/{types}/similars</code></dl>
<h1 id='ee384ab3c4'>محتواهای منبع</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسه ایندکس.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
فهرست نوع محتواها که با کاراکتر خط عمودی | به هم متصل شده‌اند.
</td>
<td style="font-weight: bold">
types
</td>
</tr></table>

<p>با دریافت اطلاعات مربوط به یک محتوا، منابعی را که این محتوا با استفاده از آنها درست شده یافته و میزان تشابه را برای هر بخش مشخص می‌کند.</p>
<h2 id='b40d4b44b2-5'>مثال</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>"       {\n         \"doc\": {\"description\": \"شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.\"},              \n       }\n"
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> POST <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">"       {</span><span class="se">\n</span><span class="s2">         </span><span class="se">\"</span><span class="s2">doc</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.</span><span class="se">\"</span><span class="s2">},              </span><span class="se">\n</span><span class="s2">       }</span><span class="se">\n</span><span class="s2">"</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/sources
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
"       {</span><span class="se">\n</span><span class="s">         </span><span class="se">\"</span><span class="s">doc</span><span class="se">\"</span><span class="s">: {</span><span class="se">\"</span><span class="s">description</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.</span><span class="se">\"</span><span class="s">},              </span><span class="se">\n</span><span class="s">       }</span><span class="se">\n</span><span class="s">"
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/sources'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="nl">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"src_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/baaz/movie/view?id=3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"src_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"شهر موشها"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"susp_from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"susp_to"</span><span class="p">:</span><span class="w"> </span><span class="mi">247</span><span class="p">,</span><span class="w">
        </span><span class="nl">"src_from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"src_to"</span><span class="p">:</span><span class="w"> </span><span class="mi">247</span><span class="p">,</span><span class="w">
        </span><span class="nl">"src_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>POST /{index_name}/{types}/sources</code></dl>
<h1 id='ba7b994b13'>‌عبارات کلیدی</h1>
<p style="font-size: 20px;font-family:IRANYekan;">پارامتر های آدرس</p>

<table style="float:right;text-align:center;font-family:IRANYekan;">
    <tr>
        <th>
            توضیحات
        </th>
        <th>
            کلید
        </th>
    </tr>
<tr>
<td>
شناسهٔ ایندکسی که می‌خواهید در آن جستجو شود.
</td>
<td style="font-weight: bold">
index_name
</td>
</tr>
<tr>
<td>
انواعی که می‌خواهید در آن‌ها جستجو شود. بیشتر از یک نوع را با کاراکتر خط عمودی `|` از هم جدا کنید.
</td>
<td style="font-weight: bold">
types
</td>
</tr>
<tr>
<td>
عبارت جستجو
</td>
<td style="font-weight: bold">
text
</td>
</tr>
<tr>
<td>
فیلدی که محتوای متنی در آن ذخیره شده است.
</td>
<td style="font-weight: normal">
field
</td>
</tr></table>

<p>عبارات کلیدیِ یک متن را استخراج می‌کند. این عبارات در هر ایندکس ممکن است متفاوت باشد. در واقع، برای یک متن واحد، بسته به اینکه در درخواست خود شناسهٔ کدام ایندکس را وارد کرده‌اید ممکن است نتایج متفاوتی دریافت کنید.</p>
<h2 id='c68bacf341'>مثال: درخواست با متنِ محتوا</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>"       {\n         \"text\": \"شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.\",\n         \"topn\": 5            \n       }\n"
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> POST <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">"       {</span><span class="se">\n</span><span class="s2">         </span><span class="se">\"</span><span class="s2">text</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">         </span><span class="se">\"</span><span class="s2">topn</span><span class="se">\"</span><span class="s2">: 5            </span><span class="se">\n</span><span class="s2">       }</span><span class="se">\n</span><span class="s2">"</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/<span class="o">{</span>field<span class="o">}</span>/keyterms
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
"       {</span><span class="se">\n</span><span class="s">         </span><span class="se">\"</span><span class="s">text</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند.</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">         </span><span class="se">\"</span><span class="s">topn</span><span class="se">\"</span><span class="s">: 5            </span><span class="se">\n</span><span class="s">       }</span><span class="se">\n</span><span class="s">"
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/{field}/keyterms'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"شهر موشها"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.02682</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"سال ۱۳۶۴"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"محمدعلی طالبی"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"مرضیه برومند"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"فیلم سینمایی"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.07857</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>POST /{index_name}/{types}/{field}/keyterms</code></dl>
<h2 id='2e84bfc77d'>مثال: درخواست با شناسهٔ محتوا</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>"       {\n         \"id\": 3,\n         \"topn\": 5            \n       }\n"
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl  <span class="nt">--request</span> GET <span class="se">\ </span>
      <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">--header</span> <span class="s2">"Authorization: Token TOKEN_KEY"</span> <span class="se">\</span>
      <span class="nt">--data-binary</span> <span class="s2">"       {</span><span class="se">\n</span><span class="s2">         </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: 3,</span><span class="se">\n</span><span class="s2">         </span><span class="se">\"</span><span class="s2">topn</span><span class="se">\"</span><span class="s2">: 5            </span><span class="se">\n</span><span class="s2">       }</span><span class="se">\n</span><span class="s2">"</span> <span class="se">\</span>
      http://api.sobhe.ir:7000/<span class="o">{</span>index_name<span class="o">}</span>/<span class="o">{</span>types<span class="o">}</span>/<span class="o">{</span>field<span class="o">}</span>/keyterms
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="n">values</span> <span class="o">=</span> <span class="s">"""
"       {</span><span class="se">\n</span><span class="s">         </span><span class="se">\"</span><span class="s">id</span><span class="se">\"</span><span class="s">: 3,</span><span class="se">\n</span><span class="s">         </span><span class="se">\"</span><span class="s">topn</span><span class="se">\"</span><span class="s">: 5            </span><span class="se">\n</span><span class="s">       }</span><span class="se">\n</span><span class="s">"
"""</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token TOKEN_KEY'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">'http://api.sobhe.ir:7000/{index_name}/{types}/{field}/keyterms'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">response_body</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Response </p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"شهر موشها فیلم سینمایی عروسکی تولیدی سال ۱۳۶۴ به کارگردانی سینمایی محمدعلی طالبی و کارگردانی عروسکی مرضیه برومند است. این فیلم سینمایی برای ردهٔ سنی کودکان ساخته شده و عروسک‌های بازیگر آن قبلاً در سریال تلویزیونی مدرسه موش‌ها ایفای نقش کرده بودند."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"شهر موشها"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.02682</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"سال ۱۳۶۴"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"محمدعلی طالبی"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"مرضیه برومند"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.03944</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"فیلم سینمایی"</span><span class="p">,</span><span class="w">
      </span><span class="mf">0.07857</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<dl style="background-color:transparent;"><code>GET /{index_name}/{types}/{field}/keyterms</code></dl>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">CURL</a>
                <a href="#" data-language-name="plaintext">RAW</a>
                <a href="#" data-language-name="python">PYTHON</a>
          </div>
      </div>
    </div>
  </body>
</html>

<script>
function Scroll(delay) {
    this.initialY = scrollY;
    this.callbacks = {
        start  : null,
        scroll : null,
        end    : null,
    };
    this.timeout = {
        delay  : delay || 150,
        handle : null,
    };
    this.handler = Scroll.handler.bind(this);
    window.addEventListener("scroll", this.handler);
}

Scroll.handler = function (e) {
    if (this.initialY == 0) {
        if (this.timeout.handle == null) {
            if (this.callbacks.start) {
                this.callbacks.start.call(this, e);
            }
        }
        if (this.timeout.handle !== null) {
            clearTimeout(this.timeout.handle);
        }
        if (this.callbacks.scroll) {
            this.callbacks.scroll.call(this, e);
        }
        var self = this;
        this.timeout.handle = setTimeout(function () {
            self.timeout.handle = null;
            if (self.callbacks.end) {
                self.callbacks.end.call(self, e);
            }
        }, this.timeout.delay);
    } else {
        this.initialY = 0;
    }
};

Scroll.prototype.addEventListener = function (event, callback) {
    if (Object.keys(this.callbacks).includes(event)) {
        this.callbacks[event] = callback;
    } else {
        console.warn("Invalid scroll event: " + event);
    }
};

window.addEventListener('DOMContentLoaded',() => {

    let tocs = document.getElementsByClassName('toc-h1 toc-link active');

    let littleTOCs = document.getElementsByClassName("toc-h2 toc-link active");

    var sl = new Scroll(400);
    
    sl.addEventListener("start", function (e) {

        for(let i = 0; i < tocs.length; i++) {
            tocs[i].style.backgroundColor = 'transparent'
            tocs[i].style.color = 'black'
        }

        for(let i = 0; i < littleTOCs.length; i++) {
            littleTOCs[i].style.backgroundColor = 'transparent'
            littleTOCs[i].style.color = 'black'
        }

    });
    
    sl.addEventListener("scroll", function () {

        for(let i = 0; i < tocs.length; i++) {
            tocs[i].style.backgroundColor = 'transparent'
            tocs[i].style.color = 'black'
        }

        for(let i = 0; i < littleTOCs.length; i++) {
            littleTOCs[i].style.backgroundColor = 'transparent'
            littleTOCs[i].style.color = 'black'
        }
    });
    

    sl.addEventListener("end", function () {

        for(let i = 0; i < tocs.length; i++) {
            tocs[i].style.backgroundColor = '#FF6200'
            tocs[i].style.color = 'white'
        }

        for(let i = 0; i < littleTOCs.length; i++) {
            littleTOCs[i].style.backgroundColor = '#FF6200'
            littleTOCs[i].style.color = 'white'
        }
    });
});
</script>