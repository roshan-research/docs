FORMAT: 1A
HOST: https://baaz.roshan-ai.ir

# باز
باز یک ای‌پی‌آی بومی برای جستجو در محتوای فارسی است. برای دسترسی به این ای‌پی‌آی به یک `TOKEN_KEY` نیاز دارید که می‌توانید با ارسال یک ایمیل به <a href="mailto:baaz@roshan-ai.ir">baaz@roshan-ai.ir</a> درخواست دهید.

## ایندکس‌کردن و ویرایش محتوا [/{index_name}/index]
این اندپوینت برای افزودن، جایگزینی و ویرایش اسناد در یک ایندکس مشخص به کار می‌رود. قبل از جستجو ابتدا باید داده‌ها را ایندکس کنید.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.

### مثال: ایندکس‌کردن محتوای جدید [POST]
این تابع محتوای شما را تحت شناسهٔ داده‌شده ایندکس می‌کند. اگر محتوایی با `type` و `id` یکسان قبلاً ایندکس شده باشد، جایگزین آن می‌شود.

+ Request (application/json)

    + Headers
    
            Authorization: Token TOKEN_KEY
        
    + Attributes
        - items (array, required) - لیستی از اسنادی که باید ایندکس شوند.
            + (object)
                - type: `document` (string, required) - نوع محتوا را مشخص می‌کند.
                - id: `f264...` (string, required) - شناسهٔ منحصربه‌فرد محتوا در سطح `type`.
                - title: `عنوان نامه` (string, required) - عنوان محتوا.
                - content (string, optional) - متن اصلی محتوا.
                - url (string, optional) - آدرس URL مرتبط با محتوا.
                - time (string, optional) - زمان ثبت محتوا (فرمت: `YYYY-MM-DD HH:MM:SS`).
                - description (string, optional) - خلاصه‌ای از محتوا.
                - labels (array[string], optional) - لیستی از برچسب‌ها.
        
    + Body

            {
                "items": [
                    {
                        "type": "document",
                        "id": "f2646930-64d7-47cc-93c1-e557777f1c489ad",
                        "url": "../correspondence/#/viewletter/d8ef171d-0f08-4e95-b71a-e1adee5905ad",
                        "title": "عنوان نامه",
                        "time": "2025-07-20 14:30:00",
                        "content": "ریلیزنوت اسپرینت 06-04-04Product Backlog Item...",
                        "description": "خلاصه نامه",
                        "labels": [
                            "e129e757-316d-4fad-9877-022b26aca152-ContentView",
                            "14ddddaa-6cd6-4683-97ec-f8c8b0fd6423-ViewLetter"
                        ]
                    }
                ]
            }

+ Response 200 (application/json)

    + Body

            {
              "ids": [
                "f2646930-64d7-47cc-93c1-e557777f1c489ad"
              ],
              "indexing_results": {
                "f2646930-64d7-47cc-93c1-e557777f1c489ad": {
                  "status": "success",
                  "source": "elasticsearch",
                  "weaviate_status": "pending",
                  "uuid": "f918e18e-11ce-5299-9c56-6560df76f0ed"
                }
              }
            }

### مثال: ویرایش محتوای موجود [PUT]
برای ویرایش بخشی از محتوای یک ایندکس، درخواست خود را با متد `PUT` ارسال کنید. در هر آیتم، واردکردن `type` و `id` برای یافتن محتوای مورد نظر ضروری است.

+ Request (application/json)

    + Headers
    
            Authorization: Token TOKEN_KEY
            
    + Body

            {
                "items": [
                    {
                        "type": "movie",
                        "id": 1,
                        "importance": 200
                    }
                ]
            }

+ Response 200 (application/json)

    + Body

            {
                "ids": [1]
            }


## حذف ایندکس یا نوع [/{index_name}/delete_index]
از این اندپوینت برای حذف کامل یک ایندکس یا حذف تمام محتواهای یک نوع خاص (`type`) استفاده می‌شود. رفتار این اندپوینت به بدنه درخواست بستگی دارد.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.

### حذف [DELETE]

+ Request حذف کامل ایندکس (application/json)
    + Headers
    
            Authorization: Token TOKEN_KEY
            
    + Body

            {}

+ Response 200 (application/json)

    + Body

            {
              "index": "TESTDELETE",
              "doc_type": "ALL",
              "status": "success"
            }

+ Request حذف محتواهای یک نوع خاص (application/json)
    + Headers
    
            Authorization: Token TOKEN_KEY
            
    + Attributes
        - type: `type2` (string, required) - نوع اسنادی که باید حذف شوند.
            
    + Body

            {
                "type": "type2"
            }

+ Response 200 (application/json)

    + Body

            {
              "index": "TESTDELETE",
              "doc_type": "type2",
              "weaviate": {
                "status": "success",
                "message": "Successfully deleted 0 documents of type 'type2'",
                "deleted_count": 0
              },
              "status": "partial"
            }


## دریافت آمار ایندکس [/{index_name}/stats]
این تابع آمار تعداد اسناد موجود در هر `type` از یک ایندکس خاص را برمی‌گرداند.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.

### مثال [GET]

+ Request

    + Headers
    
            Authorization: Token TOKEN_KEY

+ Response 200 (application/json)

    + Body
    
            {
              "document": 3,
              "نامه": 1
            }


## مشاهدهٔ محتوا [/{index_name}/{types}/view{?id}]
این اندپوینت محتوای کامل یک سند ایندکس‌شده را با استفاده از شناسه (`id`) آن بازیابی می‌کند.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.
    + types: `document` (required, string) - نوع مورد نظر برای مشاهده.
    + id: `f264...` (required, string) - شناسهٔ محتوا.

### مثال [GET]

+ Request

    + Headers
    
            Authorization: Token TOKEN_KEY

+ Response 200 (application/json)

    + Body

            {
                "body": "ریلیزنوت اسپرینت 06-04-04...",
                "id": "f2646930-64d7-47cc-93c1-e557777f1c489ad",
                "time": "2025-07-20 14:30:00",
                "type": "document",
                "description": "خلاصه نامه",
                "title": "عنوان نامه",
                "url": "../correspondence/#/viewletter/d8ef171d-0f08-4e95-b71a-e1adee5905ad",
                "labels": ["..."]
            }

## جستجوی معنایی [/{index_name}/{types}/semantic_query]
این اندپوینت یک جستجوی معنایی بر اساس مفهوم متن ورودی انجام می‌دهد.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.
    + types: `document|person` (required, string) - انواع مورد نظر برای جستجو که با `|` جدا شده‌اند.

### مثال [POST]

+ Request (application/json)

    + Headers
    
            Authorization: Token TOKEN_KEY

    + Attributes
        - text: `۴ فیلتر گردش نام ببر` (string, required) - متن مورد نظر برای جستجو.
        - size: 200 (number, optional) - تعداد نتایج بازگشتی.
    
    + Body

            {
                "text": "۴ فیلتر گردش نام ببر",
                "size": 200
            }

+ Response 200 (application/json)

    + Body

            {
                "items": [
                    {
                        "id": "f2646930-64d7-47cc-93c1-e557777f1c489add",
                        "highlight": { "content": { "chunk_1": "..." } },
                        "metadata": {
                            "labels": ["..."],
                            "type": "document",
                            "title": "عنوان نامه",
                            "description": "خلاصه نامه",
                            "time": "2025-07-20 14:30:00",
                            "url": "..."
                        },
                        "score": 1.0
                    }
                ]
            }

## یافتن اسناد مشابه [/{index_name}/similar/documents]
با دریافت شناسهٔ یک محتوای ایندکس‌شده، شبیه‌ترین محتواها را به آن پیدا کرده و برمی‌گرداند.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.

### مثال [POST]

+ Request (application/json)

    + Headers
    
            Authorization: Token TOKEN_KEY

    + Attributes
        - document_id (string, required) - شناسه سندی که مشابه آن جستجو می‌شود.
        - page_size: 10 (number, optional) - تعداد نتایج در هر صفحه.
        - page: 1 (number, optional) - شماره صفحه.
            
    + Body
    
            {   
              "document_id": "f2646930-64d7-47cc-93c1-e557777f1c489ad",
              "page_size": 10,         
              "page": 1                    
            }

+ Response 200 (application/json)

    + Body
    
            {
              "query_document_url": "f2646930-64d7-47cc-93c1-e557777f1c489ad",
              "total_results": 2,
              "documents": []
            }

## بررسی وضعیت اسناد [/{index_name}/document_status]
وضعیت ایندکس شدن یک یا چند سند را بر اساس URL آن‌ها بررسی می‌کند.

+ Parameters
    + index_name: `baaz` (required, string) - شناسهٔ ایندکس.

### مثال [POST]

+ Request (application/json)

    + Headers
    
            Authorization: Token TOKEN_KEY
    
    + Attributes
        - document_urls (array[string], required) - لیستی از URLهای اسناد برای بررسی.
        
    + Body
    
            {
                "document_urls": ["https://baaz.roshan-ai.ir/pargar-6b8e.../نامه/view?id=c81d..."]
            }

+ Response 200 (application/json)

    + Body
    
            {
              "documents": {
                "https://baaz.roshan-ai.ir/pargar-6b8e.../نامه/view?id=c81d...": "true"
              }
            }
            
## بررسی وضعیت سلامت ای‌پی‌آی [/healthcheck]
وضعیت سلامت ای‌پی‌آی را بررسی می‌کند.

### مثال [GET]

+ Response 200 (application/json)

    + Body
    
            {
                "status": "ok",
                "message": "Server is up and ready"
            }
